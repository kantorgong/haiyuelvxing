webpackJsonp([1],{28:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(34),a=(i.n(s),i(35)),n=(i.n(a),i(29)),r=(i.n(n),i(10)),h=i.n(r);e.default={name:"app",data:function(){return{turnplate:{restaraunts:[],colors:[],outsideRadius:210,textRadius:135,insideRadius:68,bRotate:!1},prize:[],lottery:{},drawNum:0,shareNum:0,complete:!1,winPrize:{},guid:0,domain:"http://plus.xxcb.cn"}},methods:{drawRouletteWheel:function(){var t=document.getElementById("wheelcanvas");if(t.getContext){var e=Math.PI/(this.turnplate.restaraunts.length/2),i=t.getContext("2d");i.clearRect(0,0,506,506),i.strokeStyle="#ff5959",i.font="bold 18px Microsoft YaHei";for(var s=0;s<this.turnplate.restaraunts.length;s++){var a=1.5*Math.PI-e/2+s*e;i.fillStyle=this.turnplate.colors[s],i.beginPath(),i.arc(253,253,this.turnplate.outsideRadius,a,a+e,!1),i.arc(253,253,this.turnplate.insideRadius,a+e,a,!0),i.stroke(),i.fill(),i.save(),i.fillStyle="#fff";var n=this.turnplate.restaraunts[s];i.translate(253+Math.cos(a+e/2)*this.turnplate.textRadius,253+Math.sin(a+e/2)*this.turnplate.textRadius),i.rotate(a+e/2+Math.PI/2);var r=n.split("");if(r.length>4)for(var h=2,o=0;o<r.length;o++)i.fillText(r[o],-i.measureText(r[o]).width/2,25*-h),h-=.8;else for(var l=1,_=0;_<r.length;_++)i.fillText(r[_],-i.measureText(r[_]).width/2,25*-l),l-=.8;i.restore()}}},getPrize:function(){this.turnplate.bRotate||(this.turnplate.bRotate=!this.turnplate.bRotate)},getQueryString:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(e);return null!=i?unescape(i[2]):null},getLottery:function(){var t=this;if(this.guid=this.getQueryString("guid"),null===this.guid)return alert("活动不存在！"),!1;h.a.get(this.domain+"/activity/wheel/index.html?guid="+this.guid).then(function(e){return console.log(e.data),-1!=e.data.code&&(-2==e.data.code?(window.location.href=t.domain+"/wechat/oauth/callback.html",!1):void 0)}).catch(function(t){console.log(t)})}},created:function(){var t=this;this.getLottery(),this.prize=[{name:"一等奖",content:"100元红包",num:5},{name:"二等奖",content:"50元红包",num:10},{name:"三等奖",content:"10元红包",num:50},{name:"四等奖",content:"2元红包",num:100}],this.drawNum=3,this.lottery.act_note="这是活动的描述内容",this.prize.forEach(function(e,i){var s=2*i;t.turnplate.restaraunts[s]=e.name,t.turnplate.restaraunts[s+1]="谢谢参与",t.turnplate.colors[s]="#ff5959",t.turnplate.colors[s+1]="#ff7f7e"})},mounted:function(){this.drawRouletteWheel()}}},29:function(module,exports){!function($){for(var supportedCSS,styles=document.getElementsByTagName("head")[0].style,toCheck="transformProperty WebkitTransform OTransform msTransform MozTransform".split(" "),a=0;a<toCheck.length;a++)void 0!==styles[toCheck[a]]&&(supportedCSS=toCheck[a]);var IE=eval('"v"=="\v"');jQuery.fn.extend({rotate:function(t){if(0!==this.length&&void 0!==t){"number"==typeof t&&(t={angle:t});for(var e=[],i=0,s=this.length;i<s;i++){var a=this.get(i);if(a.Wilq32&&a.Wilq32.PhotoEffect)a.Wilq32.PhotoEffect._handleRotation(t);else{var n=$.extend(!0,{},t),r=new Wilq32.PhotoEffect(a,n)._rootObj;e.push($(r))}}return e}},getRotateAngle:function(){for(var t=[],e=0,i=this.length;e<i;e++){var s=this.get(e);s.Wilq32&&s.Wilq32.PhotoEffect&&(t[e]=s.Wilq32.PhotoEffect._angle)}return t},stopRotate:function(){for(var t=0,e=this.length;t<e;t++){var i=this.get(t);i.Wilq32&&i.Wilq32.PhotoEffect&&clearTimeout(i.Wilq32.PhotoEffect._timer)}}}),Wilq32=window.Wilq32||{},Wilq32.PhotoEffect=function(){return supportedCSS?function(t,e){t.Wilq32={PhotoEffect:this},this._img=this._rootObj=this._eventObj=t,this._handleRotation(e)}:function(t,e){if(this._img=t,this._rootObj=document.createElement("span"),this._rootObj.style.display="inline-block",this._rootObj.Wilq32={PhotoEffect:this},t.parentNode.insertBefore(this._rootObj,t),t.complete)this._Loader(e);else{var i=this;jQuery(this._img).bind("load",function(){i._Loader(e)})}}}(),Wilq32.PhotoEffect.prototype={_setupParameters:function(t){this._parameters=this._parameters||{},"number"!=typeof this._angle&&(this._angle=0),"number"==typeof t.angle&&(this._angle=t.angle),this._parameters.animateTo="number"==typeof t.animateTo?t.animateTo:this._angle,this._parameters.step=t.step||this._parameters.step||null,this._parameters.easing=t.easing||this._parameters.easing||function(t,e,i,s,a){return-s*((e=e/a-1)*e*e*e-1)+i},this._parameters.duration=t.duration||this._parameters.duration||1e3,this._parameters.callback=t.callback||this._parameters.callback||function(){},t.bind&&t.bind!=this._parameters.bind&&this._BindEvents(t.bind)},_handleRotation:function(t){this._setupParameters(t),this._angle==this._parameters.animateTo?this._rotate(this._angle):this._animateStart()},_BindEvents:function(t){if(t&&this._eventObj){if(this._parameters.bind){var e=this._parameters.bind;for(var i in e)e.hasOwnProperty(i)&&jQuery(this._eventObj).unbind(i,e[i])}this._parameters.bind=t;for(var i in t)t.hasOwnProperty(i)&&jQuery(this._eventObj).bind(i,t[i])}},_Loader:function(){return IE?function(t){var e=this._img.width,i=this._img.height;this._img.parentNode.removeChild(this._img),this._vimage=this.createVMLNode("image"),this._vimage.src=this._img.src,this._vimage.style.height=i+"px",this._vimage.style.width=e+"px",this._vimage.style.position="absolute",this._vimage.style.top="0px",this._vimage.style.left="0px",this._container=this.createVMLNode("group"),this._container.style.width=e,this._container.style.height=i,this._container.style.position="absolute",this._container.setAttribute("coordsize",e-1+","+(i-1)),this._container.appendChild(this._vimage),this._rootObj.appendChild(this._container),this._rootObj.style.position="relative",this._rootObj.style.width=e+"px",this._rootObj.style.height=i+"px",this._rootObj.setAttribute("id",this._img.getAttribute("id")),this._rootObj.className=this._img.className,this._eventObj=this._rootObj,this._handleRotation(t)}:function(t){this._rootObj.setAttribute("id",this._img.getAttribute("id")),this._rootObj.className=this._img.className,this._width=this._img.width,this._height=this._img.height,this._widthHalf=this._width/2,this._heightHalf=this._height/2;var e=Math.sqrt(this._height*this._height+this._width*this._width);this._widthAdd=e-this._width,this._heightAdd=e-this._height,this._widthAddHalf=this._widthAdd/2,this._heightAddHalf=this._heightAdd/2,this._img.parentNode.removeChild(this._img),this._aspectW=(parseInt(this._img.style.width,10)||this._width)/this._img.width,this._aspectH=(parseInt(this._img.style.height,10)||this._height)/this._img.height,this._canvas=document.createElement("canvas"),this._canvas.setAttribute("width",this._width),this._canvas.style.position="relative",this._canvas.style.left=-this._widthAddHalf+"px",this._canvas.style.top=-this._heightAddHalf+"px",this._canvas.Wilq32=this._rootObj.Wilq32,this._rootObj.appendChild(this._canvas),this._rootObj.style.width=this._width+"px",this._rootObj.style.height=this._height+"px",this._eventObj=this._canvas,this._cnv=this._canvas.getContext("2d"),this._handleRotation(t)}}(),_animateStart:function(){this._timer&&clearTimeout(this._timer),this._animateStartTime=+new Date,this._animateStartAngle=this._angle,this._animate()},_animate:function(){var t=+new Date,e=t-this._animateStartTime>this._parameters.duration;if(e&&!this._parameters.animatedGif)clearTimeout(this._timer);else{if(this._canvas||this._vimage||this._img){var i=this._parameters.easing(0,t-this._animateStartTime,this._animateStartAngle,this._parameters.animateTo-this._animateStartAngle,this._parameters.duration);this._rotate(~~(10*i)/10)}this._parameters.step&&this._parameters.step(this._angle);var s=this;this._timer=setTimeout(function(){s._animate.call(s)},10)}this._parameters.callback&&e&&(this._angle=this._parameters.animateTo,this._rotate(this._angle),this._parameters.callback.call(this._rootObj))},_rotate:function(){var t=Math.PI/180;return IE?function(t){this._angle=t,this._container.style.rotation=t%360+"deg"}:supportedCSS?function(t){this._angle=t,this._img.style[supportedCSS]="rotate("+t%360+"deg)"}:function(e){this._angle=e,e=e%360*t,this._canvas.width=this._width+this._widthAdd,this._canvas.height=this._height+this._heightAdd,this._cnv.translate(this._widthAddHalf,this._heightAddHalf),this._cnv.translate(this._widthHalf,this._heightHalf),this._cnv.rotate(e),this._cnv.translate(-this._widthHalf,-this._heightHalf),this._cnv.scale(this._aspectW,this._aspectH),this._cnv.drawImage(this._img,0,0)}}()},IE&&(Wilq32.PhotoEffect.prototype.createVMLNode=function(){document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{return!document.namespaces.rvml&&document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<rvml:"+t+' class="rvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}}())}(jQuery)},30:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(9),a=i(8),n=i.n(a);s.a.config.productionTip=!1,new s.a({el:"#app",template:"<App/>",components:{App:n.a}})},34:function(t,e){},35:function(t,e){},38:function(t,e,i){t.exports=i.p+"../static/img/turnplate-pointer.d4ecebf.png"},39:function(t,e,i){t.exports=i.p+"../static/img/wheel_banner.de940c3.jpg"},41:function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper",attrs:{id:"app"}},[s("img",{staticClass:"banner",attrs:{src:i(39),width:"100%"}}),t._v(" "),s("div",{staticClass:"container wheel-con"},[s("div",{staticClass:"turnplate"},[s("canvas",{staticClass:"item",attrs:{id:"wheelcanvas",width:"506",height:"506"}}),t._v(" "),s("img",{staticClass:"pointer",attrs:{src:i(38)},on:{click:t.getPrize}})]),t._v(" "),s("p",{staticClass:"warning"},[t._v("剩余抽奖次数 : "),s("em",[t._v(t._s(t.drawNum))]),t._v(" 次")]),t._v(" "),s("div",{staticClass:"info"},[t._m(0),t._v(" "),t._l(t.prize,function(e){return[s("p",[t._v(t._s(e.name)+" : "+t._s(e.content)+" : "+t._s(e.num))]),t._v(" "),s("input",{staticClass:"prizes",attrs:{type:"hidden","data-value":"100元红包"}})]}),t._v(" "),t._m(1),t._v(" "),s("p",{staticClass:"desc"},[t._v(t._s(t.lottery.act_note))])],2)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"title"},[t._v("奖项设置"),i("i")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"title explanation"},[t._v("活动说明"),i("i")])}]}},8:function(t,e,i){var s=i(40)(i(28),i(41),null,null);t.exports=s.exports}},[30]);
//# sourceMappingURL=app.207e863e5efc58c7afca.js.map